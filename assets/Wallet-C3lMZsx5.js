import{j as e}from"./motion-BC2uk6a0.js";import{r as j}from"./react-sqPdxmqV.js";import{u as V,a as q}from"./index-B4IcJHRO.js";import{x as D,P as B,y as Q,z as X,E as H,X as J,s as R,q as K,w as Z,M as ee,p as te,o as ne}from"./icons-91pvdt6v.js";const re=i=>{const n=i.replace(/\r/g,`
`).split(`
`).filter(h=>h.trim().length>0);if(n.length<2)return[];const c=h=>{const y=[];let u="",g=!1;for(let m=0;m<h.length;m++){const v=h[m],S=h[m+1];v==='"'&&g&&S==='"'?(u+='"',m++):v==='"'?g=!g:v===","&&!g?(y.push(u.trim()),u=""):u+=v}return y.push(u.trim()),y},b=c(n[0]).map(h=>h.toLowerCase().trim());return n.slice(1).map(h=>{const y=c(h),u={};return b.forEach((g,m)=>{u[g]=(y[m]||"").trim()}),u})},A=i=>{const n=i.replace(/,/g,"").replace(/[^\d.-]/g,""),c=Number(n);return Number.isFinite(c)?c:0},N=(i,n)=>{for(const c of n){const b=i[c];if(b&&b.trim())return b.trim()}return""},se=i=>{if(!i)return new Date().toLocaleDateString("en-US",{month:"short",day:"numeric"});const n=new Date(i);return Number.isNaN(n.getTime())?i:n.toLocaleDateString("en-US",{month:"short",day:"numeric"})},ae=i=>{const n=i.toLowerCase();return n.includes("swiggy")||n.includes("zomato")||n.includes("cafe")||n.includes("restaurant")?"Dining":n.includes("uber")||n.includes("ola")||n.includes("metro")||n.includes("fuel")?"Transport":n.includes("amazon")||n.includes("mall")||n.includes("shop")?"Shopping":n.includes("netflix")||n.includes("spotify")||n.includes("prime")?"Entertainment":n.includes("grocery")||n.includes("mart")||n.includes("big bazaar")?"Groceries":"Shopping"},de=()=>{const{transactions:i,addTransaction:n}=V(),{formatCurrency:c}=q(),[b,h]=j.useState(""),[y,u]=j.useState(!1),[g,m]=j.useState(""),v=j.useRef(null),[S,F]=j.useState(""),[T,L]=j.useState(""),[k,I]=j.useState("Dining"),U=t=>{switch(t){case"coffee":return e.jsx(ne,{size:20});case"car":return e.jsx(te,{size:20});case"shopping-bag":return e.jsx(R,{size:20});case"music":return e.jsx(ee,{size:20});case"tv":return e.jsx(Z,{size:20});case"shopping-cart":return e.jsx(K,{size:20});default:return e.jsx(R,{size:20})}},E=(i||[]).filter(t=>{if(!t)return!1;const a=(t.merchant||"").toLowerCase(),l=(t.category||"").toLowerCase(),o=(b||"").toLowerCase();return a.includes(o)||l.includes(o)}),_=()=>{const a=[["Date","Merchant","Category","Amount"].join(","),...i.map(x=>`${x.date},${x.merchant},${x.category},${x.amount}`)].join(`
`),l=new Blob([a],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a"),p=URL.createObjectURL(l);o.setAttribute("href",p),o.setAttribute("download","transactions.csv"),document.body.appendChild(o),o.click(),document.body.removeChild(o)},W=()=>{var t;(t=v.current)==null||t.click()},O=async t=>{var l;const a=(l=t.target.files)==null?void 0:l[0];if(a)try{const o=await a.text(),p=re(o);if(p.length===0){m("No rows found in CSV file.");return}let x=0;for(const f of p){const M=A(N(f,["debit","withdrawal amt.","withdrawal amount","withdrawal"])),z=A(N(f,["credit","deposit amt.","deposit amount","deposit"])),C=A(N(f,["amount","txn amount","transaction amount"])),w=N(f,["type","transaction type","dr/cr","drcr"]).toLowerCase();let d=0;if(M>0?d=-Math.abs(M):z>0?d=Math.abs(z):C!==0&&(w.includes("credit")||w==="cr"?d=Math.abs(C):w.includes("debit")||w==="dr"?d=-Math.abs(C):d=C),d===0)continue;const r=N(f,["merchant","payee","description","remarks","narration","particulars","transaction details"])||"Imported transaction",s=N(f,["category"])||ae(r),$=se(N(f,["date","txn date","transaction date","value date"]));n({merchant:r,amount:d,category:s,date:$,icon:"shopping-bag"}),x++}m(x>0?`Imported ${x} transactions successfully.`:"No valid transactions found to import.")}catch(o){console.error("Import failed:",o),m("Failed to import file. Please check CSV format.")}finally{t.target.value=""}},Y=t=>{const a=new Date,l=t.toLowerCase();if(l.startsWith("today"))return a;if(l.startsWith("yesterday"))return new Date(a.getFullYear(),a.getMonth(),a.getDate()-1);const o=new Date(t);if(!Number.isNaN(o.getTime()))return o;const p=new Date(`${t} ${a.getFullYear()}`);return Number.isNaN(p.getTime())?null:p},G=()=>{const t=new Date,a=i.filter(r=>{const s=Y(r.date);return s&&s.getMonth()===t.getMonth()&&s.getFullYear()===t.getFullYear()}),l=a.length>0?a:i,o=l.filter(r=>r.amount<0).reduce((r,s)=>r+Math.abs(s.amount),0),p=l.filter(r=>r.amount>0).reduce((r,s)=>r+s.amount,0),x=p-o,f=l.reduce((r,s)=>{const $=r[s.category]||0;return r[s.category]=$+Math.abs(s.amount),r},{}),M=Object.entries(f).sort((r,s)=>s[1]-r[1]).slice(0,5),z=l.filter(r=>r.amount<0).reduce((r,s)=>(r[s.merchant]=(r[s.merchant]||0)+Math.abs(s.amount),r),{}),C=Object.entries(z).sort((r,s)=>s[1]-r[1]).slice(0,5),w=t.toLocaleString("en-US",{month:"long",year:"numeric"}),d=window.open("","_blank","width=900,height=800");d&&(d.document.write(`
      <html>
      <head>
        <title>Monthly Finance Report - ${w}</title>
        <style>
          body { font-family: Arial, sans-serif; padding: 32px; color: #111827; }
          h1 { margin-bottom: 4px; }
          .muted { color: #6b7280; margin-bottom: 24px; }
          .cards { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-bottom: 24px; }
          .card { border: 1px solid #e5e7eb; border-radius: 12px; padding: 12px; }
          .label { font-size: 12px; color: #6b7280; text-transform: uppercase; }
          .value { font-size: 20px; font-weight: 700; margin-top: 6px; }
          table { width: 100%; border-collapse: collapse; margin-top: 8px; }
          th, td { text-align: left; padding: 8px; border-bottom: 1px solid #e5e7eb; font-size: 14px; }
          th { font-size: 12px; color: #6b7280; text-transform: uppercase; letter-spacing: 0.04em; }
          .section { margin-top: 20px; }
        </style>
      </head>
      <body>
        <h1>Finance Mentor AI - Monthly Report</h1>
        <div class="muted">${w}</div>
        <div class="cards">
          <div class="card"><div class="label">Total Spent</div><div class="value">${c(o)}</div></div>
          <div class="card"><div class="label">Total Income</div><div class="value">${c(p)}</div></div>
          <div class="card"><div class="label">Net Savings</div><div class="value">${c(x)}</div></div>
        </div>
        <div class="section">
          <h3>Top Categories</h3>
          <table>
            <thead><tr><th>Category</th><th>Amount</th></tr></thead>
            <tbody>
              ${M.map(([r,s])=>`<tr><td>${r}</td><td>${c(s)}</td></tr>`).join("")}
            </tbody>
          </table>
        </div>
        <div class="section">
          <h3>Top Merchants</h3>
          <table>
            <thead><tr><th>Merchant</th><th>Amount</th></tr></thead>
            <tbody>
              ${C.map(([r,s])=>`<tr><td>${r}</td><td>${c(s)}</td></tr>`).join("")}
            </tbody>
          </table>
        </div>
        <div class="section">
          <h3>Summary</h3>
          <p>Transactions analyzed: ${l.length}</p>
        </div>
      </body>
      </html>
    `),d.document.close(),d.focus(),d.print())},P=t=>{if(t.preventDefault(),!S||!T)return;const a={Dining:"coffee",Groceries:"shopping-cart",Transport:"car",Shopping:"shopping-bag",Entertainment:"tv"};n({merchant:T,amount:-parseFloat(S),category:k,date:new Date().toLocaleDateString("en-US",{month:"short",day:"numeric"}),icon:a[k]||"shopping-bag"}),F(""),L(""),I("Dining"),u(!1)};return e.jsxs("div",{className:"space-y-6 animate-slide-in-left relative",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Wallet & Transactions"}),e.jsx("p",{className:"text-gray-300 text-sm",children:"Manage your expenses and income."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{ref:v,type:"file",accept:".csv,text/csv",className:"hidden",onChange:O}),e.jsxs("button",{onClick:W,className:"flex items-center gap-2 px-4 py-2 bg-white/10 border border-white/20 rounded-xl text-sm font-medium hover:bg-white/20 transition-all hover:scale-105",children:[e.jsx(D,{size:16}),"Import CSV"]}),e.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-cyan-500 to-blue-600 text-white rounded-xl text-sm font-bold hover:shadow-[0_0_30px_rgba(34,211,238,0.5)] transition-all hover:scale-105",children:[e.jsx(B,{size:16}),"New Transaction"]}),e.jsxs("button",{onClick:_,className:"flex items-center gap-2 px-4 py-2 bg-white/10 border border-white/20 rounded-xl text-sm font-medium hover:bg-white/20 transition-all hover:scale-105",children:[e.jsx(D,{size:16}),"Export CSV"]}),e.jsxs("button",{onClick:G,className:"flex items-center gap-2 px-4 py-2 bg-white/10 border border-white/20 rounded-xl text-sm font-medium hover:bg-white/20 transition-all hover:scale-105",children:[e.jsx(D,{size:16}),"Monthly Report PDF"]})]})]}),g&&e.jsx("div",{className:"text-sm text-cyan-300 bg-cyan-500/10 border border-cyan-400/30 rounded-xl px-4 py-2",children:g}),e.jsxs("div",{className:"glass-panel p-4 rounded-2xl flex flex-col md:flex-row gap-4 items-center hover-lift",children:[e.jsxs("div",{className:"relative flex-1 w-full",children:[e.jsx(Q,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-300",size:18}),e.jsx("input",{type:"text",placeholder:"Search transactions...",value:b,onChange:t=>h(t.target.value),className:"w-full bg-white/10 border border-white/20 rounded-xl pl-10 pr-4 py-2.5 text-sm text-white placeholder:text-gray-400 focus:outline-none focus:border-cyan-400 focus:ring-2 focus:ring-cyan-400/20 transition-all"})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[e.jsxs("button",{className:"flex-1 md:flex-none flex items-center justify-center gap-2 px-4 py-2.5 bg-white/10 border border-white/20 rounded-xl text-sm text-gray-200 hover:text-white hover:border-cyan-400/50 hover:bg-white/20 transition-all",children:[e.jsx(X,{size:16}),"Filter"]}),e.jsxs("button",{className:"flex-1 md:flex-none flex items-center justify-center gap-2 px-4 py-2.5 bg-white/10 border border-white/20 rounded-xl text-sm text-gray-200 hover:text-white hover:border-cyan-400/50 hover:bg-white/20 transition-all",children:[e.jsx(H,{size:16}),"Sort"]})]})]}),e.jsx("div",{className:"glass-panel rounded-2xl overflow-hidden hover-lift",children:e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-white/10 text-gray-300 text-xs uppercase tracking-wider bg-white/5",children:[e.jsx("th",{className:"p-4 font-medium",children:"Transaction"}),e.jsx("th",{className:"p-4 font-medium",children:"Category"}),e.jsx("th",{className:"p-4 font-medium",children:"Date"}),e.jsx("th",{className:"p-4 font-medium text-right",children:"Amount"}),e.jsx("th",{className:"p-4 font-medium text-center",children:"Receipt"})]})}),e.jsx("tbody",{className:"divide-y divide-white/5",children:E.map((t,a)=>e.jsxs("tr",{className:"group hover:bg-white/10 transition-all cursor-pointer animate-scale-in",style:{animationDelay:`${a*.05}s`},children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-500/20 border border-white/20 flex items-center justify-center text-white group-hover:border-cyan-400/50 group-hover:bg-cyan-500/30 transition-all group-hover:scale-110",children:U(t.icon)}),e.jsx("span",{className:"font-medium text-white group-hover:text-cyan-300 transition-colors",children:t.merchant})]})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-white/10 text-gray-200 border border-white/20 group-hover:bg-cyan-500/20 group-hover:border-cyan-400/50 group-hover:text-cyan-300 transition-all",children:t.category})}),e.jsx("td",{className:"p-4 text-sm text-gray-300 group-hover:text-white transition-colors",children:t.date}),e.jsx("td",{className:"p-4 text-right font-medium text-white group-hover:text-cyan-300 transition-colors",children:c(Math.abs(t.amount))}),e.jsx("td",{className:"p-4 text-center",children:e.jsx("button",{className:"text-gray-400 hover:text-cyan-400 transition-all hover:scale-110",children:e.jsx(D,{size:16})})})]},t.id))})]}),E.length===0&&e.jsx("div",{className:"p-8 text-center text-gray-400",children:"No transactions found."})]})}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-md p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"glass-panel-blue border-2 border-white/30 rounded-2xl w-full max-w-md p-6 shadow-2xl animate-in zoom-in-95 duration-300",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Add Transaction"}),e.jsx("button",{onClick:()=>u(!1),className:"text-gray-300 hover:text-white hover:bg-white/10 p-2 rounded-full transition-all",children:e.jsx(J,{size:20})})]}),e.jsxs("form",{onSubmit:P,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Merchant"}),e.jsx("input",{type:"text",value:T,onChange:t=>L(t.target.value),placeholder:"e.g. Starbucks",className:"w-full bg-white/90 border-none rounded-lg px-4 py-3 text-gray-800 focus:outline-none focus:ring-2 focus:ring-cyan-400 transition-all placeholder:text-gray-500",autoFocus:!0,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Amount"}),e.jsx("input",{type:"number",value:S,onChange:t=>F(t.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"w-full bg-white/90 border-none rounded-lg px-4 py-3 text-gray-800 focus:outline-none focus:ring-2 focus:ring-cyan-400 transition-all placeholder:text-gray-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Category"}),e.jsxs("select",{value:k,onChange:t=>I(t.target.value),className:"w-full bg-white/90 border-none rounded-lg px-4 py-3 text-gray-800 focus:outline-none focus:ring-2 focus:ring-cyan-400 transition-all",children:[e.jsx("option",{value:"Dining",children:"Dining"}),e.jsx("option",{value:"Groceries",children:"Groceries"}),e.jsx("option",{value:"Transport",children:"Transport"}),e.jsx("option",{value:"Shopping",children:"Shopping"}),e.jsx("option",{value:"Entertainment",children:"Entertainment"})]})]}),e.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-cyan-500 to-blue-600 text-white font-bold py-3 rounded-lg hover:shadow-[0_0_30px_rgba(34,211,238,0.5)] transition-all hover:scale-105 mt-2",children:"Add Transaction"})]})]})})]})};export{de as Wallet};
//# sourceMappingURL=Wallet-C3lMZsx5.js.map
